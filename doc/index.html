<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Faceit E2E Automation Testing</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Faceit E2E Automation Testing</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>automation-test-cypress</h1>
<p>Automation test Cypress</p>
<h2>CI/CD</h2>
<p>The <code>Jenkinsfile</code> of the project will build and push to GCR a docker image called <code>automation-test-cypress</code>.</p>
<p>The semantic versioning is used in order to generate a new version number when merging to master.
Whenever a new version is released, the new docker image is also tagged as <code>stable</code>.</p>
<p>The CI/CD Jenkinsfile, when running on a PR, if it finds a label called <code>test: XXX</code> will launch the Jenkins job which runs the <code>custom</code> suite against the <code>XXX</code> environment.</p>
<p>If you want to trigger a rebuild of the project - maybe because you have added the label after opening the pr - you can simply add a comment with the word <code>rebuild</code>.</p>
<h2>How to run</h2>
<p>You can run the entire suite just once by using directly <code>npm</code>, or you can build/run a docker image containing the suite.
There is a Jenkinsfile (<code>JenkinsfileAgents</code>) that can be used to run the suites on Jenkins with parallel agents.</p>
<h3>npm</h3>
<p>There is one command for each suite:</p>
<p><code>npm run all</code> will run all the suite
<code>npm run check</code> will run a suite with just one test, in order to test if the tests are working</p>
<h3>Docker</h3>
<p>You can build a docker image of the project by running</p>
<p><code>docker build .</code></p>
<p>The image then can be run by launching</p>
<p><code>docker run --entrypoint=cypress --env-file ./env.list IMAGE_ID run \ 	--record \ 	--parallel \     --headless \     --browser chrome \     --group run_${BUILD_ID} \     --ci-build-id ${BUILD_ID} </code></p>
<p><code>env.list</code> should contain all the environment variables that we want to pass to Cypress (e.g. the key for the Dashboard).
The <code>BUILD_ID</code> variables might be needed in order to group the tests and having the parallel magic working.</p>
<p>The tests will run as the Jenkins user under the <code>/home/jenkins</code> folder, because the docker image runs with the Jenkins user under Jenkins and I did not find any other way to make <code>npm</code> work under Jenkins with another user (usually, <code>node</code>).</p>
<h3>JenkinsfileAgent</h3>
<p>This Jenkinsfile will run the specified version of the docker image multiple times to have the tests running on parallel.</p>
<p>There are some steps to merge the reports generated during each parallel execution and to upload the final result to GCS.</p>
<p>When running the docker image, Jenkins sets the working directory to be <code>/tmp/$JOB_NAME</code>: for this reason, when we want run the tests or handle the generated reports, we have first to <code>cd</code> into the right directory of the docker image.
For the same reason, if we want to <code>stash</code> or <code>unstash</code> the files, we have to do the same thing: we have to copy the files into the Jenkins working directory so that they are copied into the actual workspace, only after that <code>stash</code> and <code>unstash</code> work as expected.</p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">HOME</a></h2><h3>Suites List</h3><ul><li><a href="module-Clean.html">Clean</a></li><li><a href="module-Custom.html">Custom</a></li><li><a href="module-TeamBlack.html">TeamBlack</a></li><li><a href="module-TeamBlue.html">TeamBlue</a></li><li><a href="module-TeamCopper.html">TeamCopper</a></li><li><a href="module-TeamCore.html">TeamCore</a></li><li><a href="module-Test.html">Test</a></li></ul><h3>Tests List</h3><ul><li><a href="module-Clean-Hubs%2520delete%2520all.html">Hubs delete all</a></li><li><a href="module-Clean-Hubs%2520Leave%2520All%2520User%25202.html">Hubs Leave All User 2</a></li><li><a href="module-Clean-Preamde%252520Team%252520Fix%252520User%2525201.html">Preamde Team Fix User 1</a></li><li><a href="module-Clean-Premade%2520Team%2520delete%2520all.html">Premade Team delete all</a></li><li><a href="module-TeamBlack-Championship%2520Queue%2520Join%2520Push.html">Championship Queue Join Push</a></li><li><a href="module-TeamBlack-Championship%2520Queue%2520Status%2520Push.html">Championship Queue Status Push</a></li><li><a href="module-TeamBlack-Championship%2520Update%2520Push.html">Championship Update Push</a></li><li><a href="module-TeamBlack-Hub%2520Details%2520Push.html">Hub Details Push</a></li><li><a href="module-TeamBlack-Hub%2520Join%2520Push.html">Hub Join Push</a></li><li><a href="module-TeamBlack-Hub%2520Queue%2520Push.html">Hub Queue Push</a></li><li><a href="module-TeamBlack-Premade%2520Team%2520Create%2520Push.html">Premade Team Create Push</a></li><li><a href="module-TeamBlack-Premade%2520Team%2520Update%2520Push.html">Premade Team Update Push</a></li><li><a href="module-TeamBlue-Send%2520Chat%2520Message.html">Send Chat Message</a></li><li><a href="module-TeamBlue-Send%2520Emoji%2520Message.html">Send Emoji Message</a></li><li><a href="module-TeamCopper-Championship%2520Create.html">Championship Create</a></li><li><a href="module-TeamCopper-Championship%2520Update.html">Championship Update</a></li><li><a href="module-TeamCopper-Create%2520Hub.html">Create Hub</a></li><li><a href="module-TeamCopper-Create%2520Hub%2520Queue.html">Create Hub Queue</a></li><li><a href="module-TeamCopper-Hub%2520Application%2520Accept_Reject.html">Hub Application Accept/Reject</a></li><li><a href="module-TeamCopper-Hub%2520Application%2520Join.html">Hub Application Join</a></li><li><a href="module-TeamCopper-Hub%2520Change%2520Details.html">Hub Change Details</a></li><li><a href="module-TeamCopper-Hub%2520Chat%2520Emoji.html">Hub Chat Emoji</a></li><li><a href="module-TeamCopper-Hub%2520Chat%2520Message.html">Hub Chat Message</a></li><li><a href="module-TeamCopper-Hub%2520Invite%2520Friend.html">Hub Invite Friend</a></li><li><a href="module-TeamCopper-Hub%2520Invite%2520Link.html">Hub Invite Link</a></li><li><a href="module-TeamCopper-Hub%2520Leaderboard%2520All%2520Time%2520Page.html">Hub Leaderboard All Time Page</a></li><li><a href="module-TeamCopper-Hub%2520Leaderboard%2520Season%2520Page.html">Hub Leaderboard Season Page</a></li><li><a href="module-TeamCopper-Hub%2520Matches%2520Page.html">Hub Matches Page</a></li><li><a href="module-TeamCopper-Hub%2520Members%2520Page.html">Hub Members Page</a></li><li><a href="module-TeamCopper-Hub%2520Rules%2520Page.html">Hub Rules Page</a></li><li><a href="module-TeamCopper-Hub%2520Stats%2520Page.html">Hub Stats Page</a></li><li><a href="module-TeamCopper-Organizer%2520Donate.html">Organizer Donate</a></li><li><a href="module-TeamCopper-Organizer%2520Follow.html">Organizer Follow</a></li><li><a href="module-TeamCore-Premade%2520Team%2520Create.html">Premade Team Create</a></li><li><a href="module-TeamCore-Premade%2520Team%2520Invite.html">Premade Team Invite</a></li><li><a href="module-TeamCore-Premade%2520Team%2520Promote%2520To%2520Admin.html">Premade Team Promote To Admin</a></li><li><a href="module-TeamCore-Premade%2520Team%2520Promote%2520To%2520Captain.html">Premade Team Promote To Captain</a></li><li><a href="module-TeamCore-Premade%2520Team%2520Update%2520Details.html">Premade Team Update Details</a></li><li><a href="module-TeamCore-Premade%2520Team%2520Upload%2520Images.html">Premade Team Upload Images</a></li><li><a href="module-Test-Test%25201.html">Test 1</a></li><li><a href="module-Test-Test%25202.html">Test 2</a></li><li><a href="module-Test-Test%25203.html">Test 3</a></li></ul><h3>Commands</h3><ul><li><a href="global.html#login()">login()</a></li><li><a href="global.html#loginAuth()">loginAuth()</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Tue Feb 23 2021 16:09:49 GMT+0000 (Greenwich Mean Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>