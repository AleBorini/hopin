<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: support/com.faceit.commands/LoginCommands.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: support/com.faceit.commands/LoginCommands.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
import {Buffer as buffer} from "buffer";


/**
 * @author Alessandro Follo Borini
 * @description Login command
 * @see &lt;a href="https://faceit.atlassian.net/wiki/spaces/QA/pages/1493368852/Faceit+Automation"> Confluence Documentation&lt;/a>
 */

/**
 * @function login()
 * @description login the user via auth end point
 * @param {string} url - Faceit env URL
 * @param {string} email -  user email
 * @param {string} user_password_autotest -  user password
 */


Cypress.Commands.add("login", (url, email, password) => {

  cy.visit(url);
  cy.get("[data-testid='signin-header']").click();
  cy.get('[class="modal-dialog "]').should("be.visible");
  cy.get('[name="email"]').type(email,
      {force: true}).should("have.value", email);
  cy.get("[name='password']").type(password, {force: true})
  .should("have.value", password);
  cy.get("[type='submit']").click();
})




/**
 * @function loginAuth()
 * @description login the user via auth end point
 * @param {string} url - Faceit env URL
 * @param {string} frontend_client_id - Frontend client id
 * @param {string} automation_client_secret - Frontend client secret
 * @param {string} api_url - API url
 * @param {string} automation_test_secret - Fronted secret for automation testing
 * @param {string} email -  user email
 * @param {string} user_password_autotest -  user password
 */

Cypress.Commands.add("loginAuth", (url, clientId, clientSecret, apiUrl, testSecret, userName, password) => {
  cy.log("Logging in with user | " + userName);
  cy.visit(url);
  cy.url().should('include', 'faceit');
  const basic = "Basic " + buffer.from(clientId + ":" + clientSecret).toString('base64');
  cy.request({
    method: 'POST',
    url: apiUrl + '/auth/v1/oauth/token',
    headers: {
      'Authorization': basic,
      'Content-Type': 'application/x-www-form-urlencoded',
    },
    body: {
      'grant_type': 'password',
      'automation_test_secret': testSecret,
      'username': userName,
      'password': password,
    }
  }).then(response => {
    const token = response.body["access_token"];
    const token_type = response.body["token_type"];
    cy.log(token_type + " " + token);
    cy.setCookie("t", token);
    cy.reload();
    //cy.get('[data-testid="PlayButton"]').should("be.visible");
  })

})

Cypress.Commands.add("loginValidate", () => {
  cy.log("Validating user login");
  cy.xpath("//*[contains(text(),'steps')]").should("be.visible");
  cy.xpath("//*[contains(text(),'under')]").click();
  cy.xpath("//*[@class='fi-navbar__main__item']//*[contains(text(),'Play')]").click({force: true});
  cy.url().should('include', '/en/dashboard');
  cy.log("User logged in correctly");

})

Cypress.Commands.add("logout", () => {

cy.get("[class='dropdown-wrapper']").click();
cy.get("[class*='dropdown-menu__link dr']").click();
cy.get("[data-testid='signin-header']").should("be.visible");

})

Cypress.Commands.add("loginValidate2", () => {
  cy.xpath("//*[contains(text(),'steps')]").should("be.visible");
  cy.xpath(
      "//*[@class='fi-navbar__main__item']//*[contains(text(),'Play')]").click(
      {force: true});
})






</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">HOME</a></h2><h3>Suites List</h3><ul><li><a href="module-Clean.html">Clean</a></li><li><a href="module-Custom.html">Custom</a></li><li><a href="module-TeamBlack.html">TeamBlack</a></li><li><a href="module-TeamBlue.html">TeamBlue</a></li><li><a href="module-TeamCopper.html">TeamCopper</a></li><li><a href="module-TeamCore.html">TeamCore</a></li><li><a href="module-Test.html">Test</a></li></ul><h3>Tests List</h3><ul><li><a href="module-Clean-Hubs%2520delete%2520all.html">Hubs delete all</a></li><li><a href="module-Clean-Hubs%2520Leave%2520All%2520User%25202.html">Hubs Leave All User 2</a></li><li><a href="module-Clean-Preamde%252520Team%252520Fix%252520User%2525201.html">Preamde Team Fix User 1</a></li><li><a href="module-Clean-Premade%2520Team%2520delete%2520all.html">Premade Team delete all</a></li><li><a href="module-TeamBlack-Championship%2520Queue%2520Join%2520Push.html">Championship Queue Join Push</a></li><li><a href="module-TeamBlack-Championship%2520Queue%2520Status%2520Push.html">Championship Queue Status Push</a></li><li><a href="module-TeamBlack-Championship%2520Update%2520Push.html">Championship Update Push</a></li><li><a href="module-TeamBlack-Hub%2520Details%2520Push.html">Hub Details Push</a></li><li><a href="module-TeamBlack-Hub%2520Join%2520Push.html">Hub Join Push</a></li><li><a href="module-TeamBlack-Hub%2520Queue%2520Push.html">Hub Queue Push</a></li><li><a href="module-TeamBlack-Premade%2520Team%2520Create%2520Push.html">Premade Team Create Push</a></li><li><a href="module-TeamBlack-Premade%2520Team%2520Update%2520Push.html">Premade Team Update Push</a></li><li><a href="module-TeamBlue-Send%2520Chat%2520Message.html">Send Chat Message</a></li><li><a href="module-TeamBlue-Send%2520Emoji%2520Message.html">Send Emoji Message</a></li><li><a href="module-TeamCopper-Championship%2520Create.html">Championship Create</a></li><li><a href="module-TeamCopper-Championship%2520Update.html">Championship Update</a></li><li><a href="module-TeamCopper-Create%2520Hub.html">Create Hub</a></li><li><a href="module-TeamCopper-Create%2520Hub%2520Queue.html">Create Hub Queue</a></li><li><a href="module-TeamCopper-Hub%2520Application%2520Accept_Reject.html">Hub Application Accept/Reject</a></li><li><a href="module-TeamCopper-Hub%2520Application%2520Join.html">Hub Application Join</a></li><li><a href="module-TeamCopper-Hub%2520Change%2520Details.html">Hub Change Details</a></li><li><a href="module-TeamCopper-Hub%2520Chat%2520Emoji.html">Hub Chat Emoji</a></li><li><a href="module-TeamCopper-Hub%2520Chat%2520Message.html">Hub Chat Message</a></li><li><a href="module-TeamCopper-Hub%2520Invite%2520Friend.html">Hub Invite Friend</a></li><li><a href="module-TeamCopper-Hub%2520Invite%2520Link.html">Hub Invite Link</a></li><li><a href="module-TeamCopper-Hub%2520Leaderboard%2520All%2520Time%2520Page.html">Hub Leaderboard All Time Page</a></li><li><a href="module-TeamCopper-Hub%2520Leaderboard%2520Season%2520Page.html">Hub Leaderboard Season Page</a></li><li><a href="module-TeamCopper-Hub%2520Matches%2520Page.html">Hub Matches Page</a></li><li><a href="module-TeamCopper-Hub%2520Members%2520Page.html">Hub Members Page</a></li><li><a href="module-TeamCopper-Hub%2520Rules%2520Page.html">Hub Rules Page</a></li><li><a href="module-TeamCopper-Hub%2520Stats%2520Page.html">Hub Stats Page</a></li><li><a href="module-TeamCopper-Organizer%2520Donate.html">Organizer Donate</a></li><li><a href="module-TeamCopper-Organizer%2520Follow.html">Organizer Follow</a></li><li><a href="module-TeamCore-Premade%2520Team%2520Create.html">Premade Team Create</a></li><li><a href="module-TeamCore-Premade%2520Team%2520Invite.html">Premade Team Invite</a></li><li><a href="module-TeamCore-Premade%2520Team%2520Promote%2520To%2520Admin.html">Premade Team Promote To Admin</a></li><li><a href="module-TeamCore-Premade%2520Team%2520Promote%2520To%2520Captain.html">Premade Team Promote To Captain</a></li><li><a href="module-TeamCore-Premade%2520Team%2520Update%2520Details.html">Premade Team Update Details</a></li><li><a href="module-TeamCore-Premade%2520Team%2520Upload%2520Images.html">Premade Team Upload Images</a></li><li><a href="module-Test-Test%25201.html">Test 1</a></li><li><a href="module-Test-Test%25202.html">Test 2</a></li><li><a href="module-Test-Test%25203.html">Test 3</a></li></ul><h3>Commands</h3><ul><li><a href="global.html#login()">login()</a></li><li><a href="global.html#loginAuth()">loginAuth()</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Tue Feb 23 2021 16:09:49 GMT+0000 (Greenwich Mean Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
